Page({
  data: {
    current: 0,
    items: [
      {
        title: '水果',
        subTitle: '描述文案',
        content: '西瓜',
        longContent: 'Est voluptate sunt consequat laboris proident eu ut qui incididunt sint sint pariatur qui. Ut labore in duis labore cupidatat in ad quis duis aliquip irure occaecat officia reprehenderit consectetur. Enim consequat veniam nulla. Enim do nisi cillum aute pariatur ex dolor mollit ut nisi. Irure non pariatur anim Lorem ad do in elit irure minim exercitation. Dolor aliquip nisi adipisicing sunt adipisicing sunt nisi ad in non laboris in magna dolore. Fugiat aliqua labore elit occaecat consequat. Ipsum officia excepteur anim sint ipsum exercitation laborum. Excepteur exercitation ea occaecat cupidatat et consectetur exercitation non. Incididunt aliqua esse velit nisi ullamco. Do dolore ad ut. Esse ad tempor aliqua cillum consequat occaecat enim dolore enim aliquip aliquip irure. Id aliquip qui nulla dolor dolore et est. Non adipisicing mollit consequat magna sit laborum mollit nulla est consequat. Veniam in eu nisi ex sint deserunt ad sit consequat excepteur qui. Ea est sint adipisicing ea aliqua eiusmod amet pariatur officia ex voluptate. Consectetur in ipsum cillum nulla minim quis aute consequat. Et adipisicing officia nostrud id reprehenderit tempor. Laborum anim aliqua ut enim et pariatur elit tempor tempor incididunt deserunt nulla deserunt enim. Esse deserunt pariatur veniam sunt fugiat irure ullamco excepteur et Lorem. Sit adipisicing nisi consectetur nulla qui sint culpa. In aute cupidatat ad consequat proident est non sint ullamco dolor nisi irure fugiat amet deserunt. Laboris nostrud tempor aute non cillum magna labore ipsum duis ut dolor velit. Qui proident dolor occaecat consequat qui laboris sit est culpa excepteur aliqua pariatur veniam irure voluptate. Cillum adipisicing deserunt nisi quis anim fugiat ipsum incididunt veniam laboris et eiusmod minim. Tempor esse ex reprehenderit occaecat velit non do magna consequat consequat exercitation tempor elit. Ea pariatur irure laborum ipsum reprehenderit sunt sit minim excepteur pariatur magna deserunt aliqua velit non. Culpa irure dolore commodo quis do. Nulla ea consectetur ullamco deserunt laborum consectetur. Amet sunt in esse cupidatat excepteur veniam do. Est quis commodo consequat reprehenderit reprehenderit. Magna laboris dolor dolor laborum. Culpa officia dolor labore aute commodo ex nisi incididunt officia in aute incididunt voluptate. Do nisi dolore ea veniam adipisicing voluptate reprehenderit ea proident aliquip. Labore enim in minim. Aliquip cillum do consequat labore Lorem exercitation. Laborum anim aute in nisi aliqua nulla commodo nostrud laborum. Lorem cillum ut cillum laborum occaecat consequat elit duis. Dolore dolor deserunt nisi dolore laborum sit ea deserunt ipsum dolor ut sit minim. Reprehenderit esse consectetur dolore esse nostrud. Commodo laborum tempor magna cillum Lorem ad qui nisi consequat sit in amet veniam. Ex pariatur eiusmod labore aute id dolor et sunt cupidatat id et non proident enim sint. Duis duis id in et in incididunt Lorem veniam aliquip. Culpa duis deserunt eiusmod laborum labore ea non sit eu ipsum eu.',
      },
      {
        title: '蔬菜',
        subTitle: '描述文案',
        badge: true,
        content: '西红柿',
        longContent: 'Excepteur esse nisi excepteur exercitation. Aliquip elit ut officia cillum nisi id. Aute in esse cillum. Enim occaecat cupidatat consequat dolor ex nulla esse non. Non ipsum ullamco veniam proident labore et exercitation dolore esse tempor culpa amet in anim mollit. Do officia proident ullamco ea ipsum reprehenderit irure occaecat proident id culpa dolore Lorem deserunt. Aliquip ut ex dolor ut eiusmod elit et velit sunt ipsum aliquip dolore. Ullamco sit excepteur dolore anim irure duis aute labore ex elit. Lorem pariatur esse in cupidatat nostrud reprehenderit tempor aute quis. Minim eiusmod aute do. Lorem aliquip ea consequat occaecat aliqua duis dolore Lorem elit in anim dolore magna veniam adipisicing. Proident consequat Lorem et. Occaecat nisi id mollit do labore eu consequat aliquip aute nulla fugiat. Irure nisi reprehenderit sint proident commodo dolore. Cillum laboris aliquip labore quis ad. Excepteur labore commodo consectetur quis sunt. Dolor voluptate laboris id et do irure exercitation ex elit consequat dolore exercitation. Id nulla ad sint excepteur occaecat sunt nostrud anim consectetur labore consequat dolor ex in sunt. Laborum elit ad enim do aute ullamco minim culpa mollit fugiat laborum adipisicing. Nostrud velit esse consequat et ea. Et deserunt minim ipsum. Anim dolore velit ex cillum occaecat magna irure culpa aliquip ex laboris duis consequat ipsum incididunt. Anim laborum aliqua tempor excepteur mollit in consequat voluptate veniam dolore. Magna commodo officia officia in anim officia ex. Adipisicing mollit eu aliqua ex elit ipsum dolor incididunt adipisicing minim proident excepteur. Veniam veniam ex occaecat culpa eu consequat quis pariatur quis duis duis. Consectetur commodo eu voluptate pariatur sit sit reprehenderit duis esse veniam ullamco ullamco est. Laboris laborum exercitation anim tempor commodo fugiat. Sit ipsum consectetur pariatur in. Officia irure ipsum culpa irure veniam commodo laborum consequat sit laboris incididunt esse. Est in eiusmod ad ad deserunt consequat adipisicing commodo sit non culpa. Officia ut ex laborum fugiat. Magna sit do ullamco ex aute elit reprehenderit. Voluptate commodo Lorem est incididunt ullamco tempor cupidatat sint magna amet occaecat qui magna. Aliquip consequat pariatur tempor voluptate est pariatur excepteur. Nulla mollit adipisicing do magna proident velit consectetur magna nisi aliquip adipisicing et velit quis ad. Mollit minim elit fugiat tempor non in exercitation cillum quis qui pariatur laborum excepteur in cillum. Enim nostrud nisi consequat deserunt deserunt consequat velit laboris amet magna et eu ipsum. Aliqua cillum elit minim do id exercitation magna. Cupidatat incididunt reprehenderit culpa occaecat ullamco anim dolore. Anim occaecat occaecat esse non occaecat duis et fugiat. Pariatur velit dolor Lorem ullamco laborum deserunt deserunt consectetur consequat deserunt mollit esse. Irure nostrud velit nostrud aliqua ad ea voluptate. Culpa ex officia consectetur eiusmod cupidatat. Nulla Lorem ut ea eu deserunt eiusmod aliqua Lorem quis aute elit. Eiusmod cillum nisi veniam veniam fugiat deserunt adipisicing exercitation amet Lorem. Mollit sit dolore tempor et magna non proident cupidatat anim veniam. Nisi velit est occaecat amet dolor ut reprehenderit mollit culpa dolore ad pariatur. Pariatur qui ex qui excepteur reprehenderit. Mollit consectetur esse incididunt adipisicing dolore.',
      },
      {
        title: '动物',
        subTitle: '描述文案',
        content: '蚂蚁',
        longContent: 'Aute cillum et eu. Est ut magna sint ex ex adipisicing qui occaecat sint excepteur eiusmod adipisicing id eiusmod. Proident culpa tempor ullamco ad non ex incididunt ullamco tempor quis fugiat commodo consectetur. Id aliquip in labore occaecat ut exercitation mollit ipsum nisi pariatur occaecat ut minim duis enim. Magna cupidatat id do. Voluptate id tempor cillum aliqua mollit quis veniam sit fugiat culpa qui veniam deserunt reprehenderit. Reprehenderit qui est est consequat commodo occaecat id. Do consequat ut incididunt ea ipsum fugiat aliqua dolore velit incididunt. Dolor quis amet mollit fugiat quis ullamco culpa occaecat. Voluptate do ullamco excepteur duis dolor sit enim officia. Nostrud id aute nisi voluptate cupidatat pariatur duis et cillum. Excepteur nisi exercitation labore elit consequat officia non fugiat. Tempor deserunt eu do culpa quis fugiat proident amet qui deserunt eiusmod velit culpa. Nisi officia aliquip culpa pariatur sunt non quis eiusmod aliqua commodo et Lorem duis minim amet. Voluptate enim laborum ex dolore in anim cillum dolore ut officia Lorem ipsum exercitation irure anim. Pariatur quis consequat tempor eu quis tempor aute esse commodo ipsum non enim sunt. Sit laboris amet consequat. Aute sunt qui eiusmod enim amet ut in elit ea pariatur est et consequat. Occaecat adipisicing id ex nostrud labore anim. Ullamco eiusmod dolor et minim fugiat culpa nulla tempor cupidatat reprehenderit sit fugiat duis quis. Sunt est ipsum adipisicing. Do enim ullamco minim tempor dolore consequat. Consequat non nulla proident aute nulla magna et. Labore quis veniam adipisicing irure reprehenderit ipsum ex eu. Labore sint dolore voluptate laborum id ad eu minim aute consectetur adipisicing aliquip exercitation culpa. Ullamco exercitation dolore elit cupidatat elit ex aliqua pariatur duis cillum. Cillum consectetur ipsum cillum dolore. Et commodo id aliquip do sunt ea pariatur ut aliqua proident occaecat aute esse. Deserunt incididunt sit tempor culpa laboris ea minim laboris magna et consequat. Labore do duis cillum. Eiusmod nostrud enim sunt eiusmod consectetur. Irure ex consectetur officia nisi enim consectetur Lorem exercitation adipisicing sit consequat excepteur. Minim velit in ea nulla tempor ad irure laborum est tempor laboris enim ea non laboris. Velit magna fugiat aute laboris. Commodo sunt voluptate laborum labore tempor ullamco voluptate nostrud ea. Reprehenderit fugiat minim nulla fugiat enim sit Lorem. Est aute magna sunt magna labore do Lorem proident. Laboris et anim non aliqua eu laboris fugiat nostrud tempor deserunt ex officia quis dolore ipsum. Aliquip ea sint qui duis culpa non aliquip voluptate consectetur labore velit. Anim do est enim cupidatat ex et ad reprehenderit officia ullamco exercitation dolore. Non esse sint fugiat laborum eu enim aliqua enim nostrud. Lorem occaecat labore amet voluptate Lorem tempor do fugiat fugiat eu pariatur ea excepteur duis. Officia amet ipsum esse sunt anim deserunt. Esse eu officia mollit. Officia ut labore dolore et duis excepteur sunt cillum qui qui enim magna adipisicing. Dolor ipsum est nisi duis minim laboris magna anim ea labore eiusmod anim sunt deserunt. Est Lorem cupidatat officia laborum Lorem incididunt ex et est culpa occaecat et eiusmod exercitation. Qui do nostrud adipisicing dolore incididunt. Ex nostrud velit deserunt dolore cillum anim et exercitation magna qui pariatur consectetur laboris deserunt.',
      },
    ],
    items2: [
      {
        title: '水果',
        subTitle: '描述文案',
        content: '西瓜',
      },
      {
        title: '蔬菜',
        subTitle: '描述文案',
        content: '西红柿',
        disabled: true,
      },
      {
        title: '动物',
        subTitle: '描述文案',
        content: '蚂蚁',
      },
    ],
    items3: [],
  },
  onLoad() {
    const items3 = new Array(6).fill(null).map((_, index) => {
      return {
        title: `Tab ${index}`,
        content: `Content of tab ${index}`,
      };
    });
    this.setData({
      items3,
    });
  },
  onChange(current) {
    /// #if WECHAT
    current = current.detail;
    /// #endif
    this.setData({
      current,
    })
  },
  handleChange(current) {
    /// #if WECHAT
    current = current.detail;
    /// #endif

    this.setData({
      current,
    });
  },
  onPlus() {
    this.alert('plus');
  },
  alert(content) {
    /// #if ALIPAY || BUNDLE2H
    my.alert({
      title: content,
    });
    /// #endif

    /// #if WECHAT
    //@ts-ignore
    wx.showToast({
      title: content,
    });
    /// #endif
  },
  onPrevTap() {
    if (this.data.items.length === 0) {
      return;
    }
    const current =
      this.data.current === 0
        ? this.data.items.length - 1
        : this.data.current - 1;
    this.setData({
      current,
    });
  },
  onNextTap() {
    if (this.data.items3.length === 0) {
      return;
    }
    const current =
      this.data.current >= this.data.items3.length - 1
        ? 0
        : this.data.current + 1;
    this.setData({
      current,
    });
  },
  onAddTap() {
    const items3 = [...this.data.items3];
    items3.push({
      title: `Tab ${items3.length}`,
      content: `Content of tab ${items3.length}`,
    });
    this.setData({
      items3,
      current: items3.length - 1,
    });
  },
  onMinusTap() {
    if (this.data.items3.length === 1) {
      return;
    }
    const items3 = [...this.data.items3];
    items3.splice(items3.length - 1, 1);
    this.setData({
      items3,
      current: Math.min(this.data.current, items3.length - 1),
    });
  },

  async updateRect() {
    this.itemRectList = await Promise.all(
      this.data.items.map((item, index) =>
        this.getBoundingClientRect(`#tab-item-${index}`)
      )
    );
    this.scrollViewRect = await this.getBoundingClientRect('#scroll-view');
  },
  async onReady() {
    await this.updateRect();
  },
  
  onTouchStart() {
    this.tap = false;
  },
  onScroll(e) {
    if (this.tap) {
      return;
    }
    this.scrollTop = e.detail.scrollTop;
    const scrollTop = this.scrollTop + this.itemRectList[0].top;
    for (let i = 0; i < this.itemRectList.length; i++) {
      const item = this.itemRectList[i];
      if (
        scrollTop > item.top &&
        (!this.itemRectList[i + 1] ||
          scrollTop < this.itemRectList[i + 1].top) &&
        i !== this.data.current
      ) {
        this.setData({
          current: i,
        });
        return;
      }
    }
  },
});
